<ImageAugmentationLayout>:
    md_bg_color: 0.23, 0.2, 0.27
    radius: [25,]
    orientation: 'vertical'
    spacing: 10
    padding: [10, 10, 10, 10]

    crop_width: crop_width
    crop_height: crop_height
    rotate_angle: rotate_angle
    contrast_factor: contrast_factor
    brightness_factor: brightness_factor
    flip_direction: flip_direction
    saturation_factor: saturation_factor
    noise_mean: noise_mean
    noise_std: noise_std
    translate_x: translate_x
    translate_y: translate_y
    shear_factor: shear_factor
    stretch_x: stretch_x
    stretch_y: stretch_y
    random_crop_width: random_crop_width
    random_crop_height: random_crop_height
    text_overlay: text_overlay
    text_position_x: text_position_x
    text_position_y: text_position_y

    MDLabel:
        size_hint: 1.0, None
        height: self.texture_size[1]
        text: "ImageAugmentation"
        halign: 'center'
        color: 1,1,1,1
        font_style: 'Headline'
        role: 'small'

    MDScrollView:
        do_scroll_y: True
        bar_width: 0
        size_hint: 0.85, 0.85
        pos_hint: {'center_x': 0.5,'center_y': 0.5}

        MDBoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: self.minimum_height
            spacing: "20dp"  
            padding: "10dp"
              
            MDLabel:
                size_hint: 1.0, None
                height: self.texture_size[1]
                text: "Crop:"
                color: 1,1,1,1
                font_style: 'Title'
                role: 'large'

            MDGridLayout:
                cols: 2
                size_hint: 1.0, None
                height: "48dp"
                spacing: "20dp" 
                MDTextField:
                    id: crop_width
                    mode: 'filled'
                    input_filter: "float"
                    MDTextFieldHintText:
                        text: 'Width'
                MDTextField:
                    id: crop_height
                    mode: 'filled'
                    input_filter: "float"
                    MDTextFieldHintText:
                        text: 'Height'

            MDLabel:
                size_hint: 1.0, None
                height: self.texture_size[1]
                text: "Rotate:"
                color: 1,1,1,1
                font_style: 'Title'
                role: 'large'

            MDTextField:
                id: rotate_angle
                mode: 'filled'
                input_filter: "float"
                MDTextFieldHintText:
                    text: 'Angle'

            MDLabel:
                size_hint: 1.0, None
                height: self.texture_size[1]
                text: "Flip:"
                color: 1,1,1,1
                font_style: 'Title'
                role: 'large'

            MDTextField:
                id: flip_direction
                mode: 'filled'
                input_filter: "int"
                MDTextFieldHintText:
                    text: 'Direction (0, 1, or -1)'

            MDLabel:
                size_hint: 1.0, None
                height: self.texture_size[1]
                text: "Tonality:"
                color: 1,1,1,1
                font_style: 'Title'
                role: 'large'

            MDGridLayout:
                cols: 3
                size_hint: 1.0, None
                height: "48dp"
                spacing: "20dp"  
                MDTextField:
                    id: contrast_factor
                    mode: 'filled'
                    input_filter: "float"
                    MDTextFieldHintText:
                        text: 'Contrast'
                MDTextField:
                    id: brightness_factor
                    mode: 'filled'
                    input_filter: "float"
                    MDTextFieldHintText:
                        text: 'Brightness'
                MDTextField:
                    id: saturation_factor
                    mode: 'filled'
                    input_filter: "float"
                    MDTextFieldHintText:
                        text: 'Saturation'

            MDLabel:
                size_hint: 1.0, None
                height: self.texture_size[1]
                text: "Add Noise:"
                color: 1,1,1,1
                font_style: 'Title'
                role: 'large'

            MDGridLayout:
                cols: 2
                size_hint: 1.0, None
                height: "48dp"
                spacing: "20dp" 
                MDTextField:
                    id: noise_mean
                    mode: 'filled'
                    input_filter: "float"
                    MDTextFieldHintText:
                        text: 'Mean'
                MDTextField:
                    id: noise_std
                    mode: 'filled'
                    input_filter: "float"
                    MDTextFieldHintText:
                        text: 'Std Dev'

            MDLabel:
                size_hint: 1.0, None
                height: self.texture_size[1]
                text: "Translate:"
                color: 1,1,1,1
                font_style: 'Title'
                role: 'large'

            MDGridLayout:
                cols: 2
                size_hint: 1.0, None
                height: "48dp"
                spacing: "20dp"  
                MDTextField:
                    id: translate_x
                    mode: 'filled'
                    input_filter: "float"
                    MDTextFieldHintText:
                        text: 'X'
                MDTextField:
                    id: translate_y
                    mode: 'filled'
                    input_filter: "float"
                    MDTextFieldHintText:
                        text: 'Y'

            MDLabel:
                size_hint: 1.0, None
                height: self.texture_size[1]
                text: "Shear:"
                color: 1,1,1,1
                font_style: 'Title'
                role: 'large'

            MDTextField:
                id: shear_factor
                mode: 'filled'
                input_filter: "float"
                MDTextFieldHintText:
                    text: 'Shear Factor'

            MDLabel:
                size_hint: 1.0, None
                height: self.texture_size[1]
                text: "Stretch:"
                color: 1,1,1,1
                font_style: 'Title'
                role: 'large'

            MDGridLayout:
                cols: 2
                size_hint: 1.0, None
                height: "48dp"
                spacing: "20dp"  
                MDTextField:
                    id: stretch_x
                    mode: 'filled'
                    input_filter: "float"
                    MDTextFieldHintText:
                        text: 'X Factor'
                MDTextField:
                    id: stretch_y
                    mode: 'filled'
                    input_filter: "float"
                    MDTextFieldHintText:
                        text: 'Y Factor'

            MDLabel:
                size_hint: 1.0, None
                height: self.texture_size[1]
                text: "Random Crop:"
                color: 1,1,1,1
                font_style: 'Title'
                role: 'large'

            MDGridLayout:
                cols: 2
                size_hint: 1.0, None
                height: "48dp"
                spacing: "20dp"  
                MDTextField:
                    id: random_crop_width
                    mode: 'filled'
                    input_filter: "int"
                    MDTextFieldHintText:
                        text: 'Width'
                MDTextField:
                    id: random_crop_height
                    mode: 'filled'
                    input_filter: "int"
                    MDTextFieldHintText:
                        text: 'Height'

            MDLabel:
                size_hint: 1.0, None
                height: self.texture_size[1]
                text: "Add Text:"
                color: 1,1,1,1
                font_style: 'Title'
                role: 'large'

            MDTextField:
                id: text_overlay
                mode: 'filled'
                MDTextFieldHintText:
                    text: 'Text'

            MDGridLayout:
                cols: 2
                size_hint: 1.0, None
                height: "48dp"
                spacing: "20dp"  
                MDTextField:
                    id: text_position_x
                    mode: 'filled'
                    input_filter: "int"
                    MDTextFieldHintText:
                        text: 'X Position'
                MDTextField:
                    id: text_position_y
                    mode: 'filled'
                    input_filter: "int"
                    MDTextFieldHintText:
                        text: 'Y Position'

    MDBoxLayout:
        adaptive_size: True
        spacing: 10
        padding: [10, 20, 10, 20]  
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        orientation: 'horizontal'
        
        MDButton:
            id: clear_button
            style: 'elevated'
            on_press: root.clear_changes()
            MDButtonIcon:
                icon: 'minus'
            MDButtonText:
                text: 'Clear'
        
        MDButton:
            id: apply_button
            style: 'elevated'
            on_press: root.apply_changes()
            MDButtonIcon:
                icon: 'check'
            MDButtonText:
                text: 'Apply'
        
        MDButton:
            id: save_button
            style: 'elevated'
            on_press: root.save_image()
            MDButtonIcon:
                icon: 'content-save'
            MDButtonText:
                text: 'Save'